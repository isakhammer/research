(window.webpackJsonpPSI=window.webpackJsonpPSI||[]).push([[6],{6:function(t,n,i){"use strict";i.r(n);var e=i(0),o=function(){function t(t){void 0===t&&(t={}),this.timeout=t.timeout||e.h,this.interval=t.interval||e.g,this.window=t.window||window,this.instance=t.instance||null}return t.prototype.create=function(){var t=this;return this.instance?Promise.resolve(this.getSpidSession(this.instance)):this.waitForSpid().then(function(n){return t.getSpidSession(n)})},t.prototype.waitForSpid=function(){var t=this;return new Promise(function(n,i){var e=!1,o=setTimeout(function(){return i(new Error("Waited too long for SPiD, aborting."))},t.timeout),r=0;var u=function(){e||(t.window.Identity&&"function"==typeof t.window.Identity.getUser&&"function"==typeof t.window.Identity.isLoggedIn&&"function"==typeof t.window.Identity.on?function(t){e||(e=!0,clearTimeout(r),r=null,clearTimeout(o),o=null,n(t))}(t.window.Identity):r=t.window.setTimeout(function(){return u()},t.interval))};u()})},t.prototype.getSpidSession=function(t){return new Promise(function(n){t.isLoggedIn().then(function(i){i?t.getUser().then(function(t){var i=t.id;n({id:i,authenticated:!0})}).catch(function(){return n({id:null,authenticated:!0})}):n({id:null,authenticated:!1})})})},t}();n.default=o}}]);