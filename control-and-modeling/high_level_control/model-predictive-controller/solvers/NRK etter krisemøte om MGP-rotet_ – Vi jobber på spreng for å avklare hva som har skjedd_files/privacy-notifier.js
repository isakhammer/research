!function(t){function e(e){for(var n,r,o=e[0],c=e[1],a=0,u=[];a<o.length;a++)r=o[a],i[r]&&u.push(i[r][0]),i[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);for(s&&s(e);u.length;)u.shift()()}var n={},i={0:0};function r(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.e=function(t){var e=[],n=i[t];if(0!==n)if(n)e.push(n[2]);else{var o=new Promise(function(e,r){n=i[t]=[e,r]});e.push(n[2]=o);var c,a=document.getElementsByTagName("head")[0],s=document.createElement("script");s.charset="utf-8",s.timeout=120,r.nc&&s.setAttribute("nonce",r.nc),s.src=function(t){return r.p+""+({1:"pulse.loader",2:"spid.loader",3:"pulse.factory.0",4:"pulse.factory.1",5:"spid.factory.0",6:"spid.factory.1"}[t]||t)+".chunk.js"}(t),c=function(e){s.onerror=s.onload=null,clearTimeout(u);var n=i[t];if(0!==n){if(n){var r=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src,c=new Error("Loading chunk "+t+" failed.\n("+r+": "+o+")");c.type=r,c.request=o,n[1](c)}i[t]=void 0}};var u=setTimeout(function(){c({type:"timeout",target:s})},12e4);s.onerror=s.onload=c,a.appendChild(s)}return Promise.all(e)},r.m=t,r.c=n,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r.oe=function(t){throw console.error(t),t},Object.defineProperty(r,"p",{get:function(){return"https://jssdk.privacy.schibsted.com/"}});var o=window.webpackJsonpPSI=window.webpackJsonpPSI||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var a=0;a<o.length;a++)e(o[a]);var s=c;r(r.s=2)}([function(t,e,n){"use strict";n.d(e,"f",function(){return i}),n.d(e,"e",function(){return r}),n.d(e,"h",function(){return o}),n.d(e,"g",function(){return c}),n.d(e,"i",function(){return a}),n.d(e,"j",function(){return s}),n.d(e,"a",function(){return u}),n.d(e,"d",function(){return l}),n.d(e,"c",function(){return f}),n.d(e,"b",function(){return p});var i=6e3,r=100,o=6e3,c=100,a=2,s=500,u="https://api.privacy.schibsted.com/v1/",l="bar",f=".psi-btn--click",p="Privacy"},function(t,e){function n(){}n.prototype={on:function(t,e,n){var i=this.e||(this.e={});return(i[t]||(i[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var i=this;function r(){i.off(t,r),e.apply(n,arguments)}return r._=e,this.on(t,r,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),i=0,r=n.length;i<r;i++)n[i].fn.apply(n[i].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),i=n[t],r=[];if(i&&e)for(var o=0,c=i.length;o<c;o++)i[o].fn!==e&&i[o].fn._!==e&&r.push(i[o]);return r.length?n[t]=r:delete n[t],this}},t.exports=n},function(t,e,n){"use strict";n.r(e);var i,r=n(0),o=function(){function t(t){void 0===t&&(t={}),this.path=t.path||"/",this.domain=t.domain||"localhost"}return t.prototype.get=function(t){try{return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;\\s*)"+encodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*)|.*"),"$1"))||null}catch(t){return null}},t.prototype.set=function(t,e,n){if(n){var i=new Date;try{i.setTime(i.getTime()+1e3*n*3600),document.cookie=t+"="+e+"; expires="+i.toUTCString()+"; path="+this.path+"; domain="+this.domain}catch(t){return null}}else try{document.cookie=t+"="+e+"; expires=Fri, 31 Dec 2035 23:59:59 GMT; path="+this.path+"; domain="+this.domain}catch(t){return null}},t.prototype.clear=function(t){document.cookie=t+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path="+this.path+"; domain="+this.domain},t}(),c=n(1),a=function(){function t(){this.eventEmitter=new c}return t.prototype.emit=function(t){for(var e,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return(e=this.eventEmitter).emit.apply(e,[t].concat(n))},t.prototype.on=function(t,e){return this.eventEmitter.on(t,e)},t}(),s=function(){function t(t,e){this.notifications=e,this.notification=t}return t.prototype.trackClick=function(t,e){void 0===e&&(e=null),this.notifications.tracking.click(t,this,e)},t.prototype.trackView=function(t){return void 0===t&&(t=null),this.notifications.tracking.view(this,t)},Object.defineProperty(t.prototype,"id",{get:function(){return this.notification.id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"content",{get:function(){return this.notification.content},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"format",{get:function(){return this.notification.format},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this.notification.version},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logged_in_url",{get:function(){return this.notification.logged_in_url},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"non_logged_in_url",{get:function(){return this.notification.non_logged_in_url},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"force",{get:function(){return this.notification.force},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hide_after",{get:function(){return this.notification.hide_after},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hide_for",{get:function(){return this.notification.hide_for},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return"object"!=typeof this.content&&this.content.toString?this.content.toString():JSON.stringify(this.content)},t}(),u=function(t,e,n,i){return new(n||(n=Promise))(function(r,o){function c(t){try{s(i.next(t))}catch(t){o(t)}}function a(t){try{s(i.throw(t))}catch(t){o(t)}}function s(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(c,a)}s((i=i.apply(t,e||[])).next())})},l=function(t,e){var n,i,r,o,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return c.label++,{value:o[1],done:!1};case 5:c.label++,i=o[1],o=[0];continue;case 7:o=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){c=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){c.label=o[1];break}if(6===o[0]&&c.label<r[1]){c.label=r[1],r=o;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(o);break}r[2]&&c.ops.pop(),c.trys.pop();continue}o=e.call(t,c)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},f=function(){function t(t){this.appId=t.appId,this.endpoint=t.endpoint||r.a,this.entity=t.entity,this.format=t.format||r.d,this.user=t.user,this.notifications=this.entity||this.fetchNotifications()}return t.prototype.fetchNotifications=function(){return u(this,void 0,Promise,function(){var t;return l(this,function(e){switch(e.label){case 0:t=this.buildNotificationEndpointUrl(),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,fetch(t,{method:"GET",headers:{"Content-Type":"application/json"}})];case 2:return[2,e.sent().json()];case 3:return e.sent(),console.log("Unable to fetch notification."),[3,4];case 4:return[2]}})})},t.prototype.getInstance=function(){return this.notifications instanceof Promise?this.notifications:Promise.resolve(this.notifications)},t.prototype.buildNotificationEndpointUrl=function(){var t=new URL("privacy/notification",this.endpoint);return this.appId&&t.searchParams.set("app_id",this.appId),this.format&&t.searchParams.set("format",this.format),t.toString()},t}();!function(t){t.VIEW="view",t.CLICK="click"}(i||(i={}));var p=function(){function t(t){void 0===t&&(t={trackers:[]});var e=this;this.trackers=[],t.trackers&&t.trackers.forEach(function(t){return e.add(t)})}return t.prototype.click=function(t,e,n){void 0===n&&(n=null),this.track(t,i.CLICK,e,n)},t.prototype.view=function(t,e){void 0===e&&(e=null),this.track(null,i.VIEW,t,e)},t.prototype.add=function(t){return this.trackers.push(t),this},t.prototype.remove=function(t){return this.trackers=this.trackers.filter(function(e){return e!==t}),this},t.prototype.track=function(t,e,n,i){var r=this;if(void 0===i&&(i=null),this.trackers&&this.trackers.length){var o=this.numOfTrackersWithCallback(e),c=null;i&&o&&(c=this.createCallback(o,i)),this.trackers.forEach(function(i){var o,a=[];r.actionWithEvent(e)&&a.push(t),a.push(n),r.hasCallback(e,i[e])&&a.push(c),(o=i[e]).call.apply(o,[i].concat(a))})}else i&&i()},t.prototype.createCallback=function(t,e){var n=0,i=window.setTimeout(e,r.j);return function(){(n+=1)===t&&null!==i&&(window.clearTimeout(i),i=null,e())}},t.prototype.hasCallback=function(t,e){return e.length===this.numOfArgsWithCallback(t)},t.prototype.numOfArgsWithCallback=function(t){return t===i.VIEW?2:3},t.prototype.actionWithEvent=function(t){return t!==i.VIEW},t.prototype.numOfTrackersWithCallback=function(t){var e=this;return this.trackers.filter(function(n){return e.hasCallback(t,n[t])}).length},t}(),h=function(){function t(t){this.notifications=[],t.appId&&(this.appId=t.appId),this.endpoint=t.endpoint,this.entity=t.entity,this.tracking=new p,t.tracker&&this.tracking.add(t.tracker),this.user=t.user}return t.prototype.initialize=function(){var t=this;return new f({appId:this.appId,endpoint:this.endpoint,entity:this.entity,user:this.user}).getInstance().then(function(t){return t.statusCode?Promise.reject(t):t}).then(function(e){t.notifications=[new s(e,t)]}).then(function(){return t}).catch(function(t){return console.log(t)})},t}(),d=function(){function t(t){this.events=t.events,this.container=t.container,this.user=t.user}return t.prototype.addClickTracking=function(t,e){var n=this,i=t.querySelectorAll(r.c);if(i)for(var o=0;o<i.length;o+=1)i[o].addEventListener("click",function(t){n.events.emit("clickTracking",t);var i=t.srcElement;i&&(e.trackClick(t,function(){var t=i.getAttribute("href");t&&"#"!==t&&(document.location.href=t)}),t.preventDefault())})},t.prototype.setPrivacyPortalUrl=function(t,e){var n=t.querySelectorAll('[data-action="privacy-portal"]');if(n)for(var i=0;i<n.length;i+=1){var r=n[i];r instanceof HTMLAnchorElement&&this.events.emit("setPrivacyPortalUrl",r,e)}},t.prototype.render=function(t){var e=this.createNode(t.content);this.addClickTracking(e,t),this.setPrivacyPortalUrl(e,t),this.display(e,t)},t.prototype.display=function(t,e){this.container.appendChild(t),document.body.appendChild(this.container),e.trackView()},t.prototype.createNode=function(t){var e=document.createDocumentFragment(),n=document.createElement("div");for(n.innerHTML=t;n.firstChild;){if(n.firstChild instanceof HTMLElement&&"SCRIPT"===n.firstChild.tagName){var i=document.getElementsByTagName("head")[0]||document.documentElement,r=document.createElement("script");r.type="text/javascript",r.appendChild(document.createTextNode(n.firstChild.innerHTML)),i.insertBefore(r,i.firstChild),i.removeChild(r)}e.appendChild(n.firstChild)}return e},t}(),y=function(){return function(t){void 0===t&&(t={}),this.id=t.id||null,this.authenticated="boolean"==typeof t.authenticated?t.authenticated:null}}(),v=function(t,e){return isNaN(parseInt(t,10))?e:parseInt(t,10)},m=function(t){return t.user.authenticated?t.notification.logged_in_url.replace(new RegExp(t.pattern||"{environmentId}$"),t.user.id):t.notification.non_logged_in_url.replace(new RegExp(t.pattern||"{environmentId}$"),t.user.id)},g=function(t,e,n,i){return new(n||(n=Promise))(function(r,o){function c(t){try{s(i.next(t))}catch(t){o(t)}}function a(t){try{s(i.throw(t))}catch(t){o(t)}}function s(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(c,a)}s((i=i.apply(t,e||[])).next())})},b=function(t,e){var n,i,r,o,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return c.label++,{value:o[1],done:!1};case 5:c.label++,i=o[1],o=[0];continue;case 7:o=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){c=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){c.label=o[1];break}if(6===o[0]&&c.label<r[1]){c.label=r[1],r=o;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(o);break}r[2]&&c.ops.pop(),c.trys.pop();continue}o=e.call(t,c)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},k=function(){function t(t){var e=this;this.appId=t.appId,this.backendEndpoint=t.backendEndpoint||r.a,t.notification&&(this.notification=t.notification),this.cookie=new o(t.cookieOpts||{}),this.events=new a,this.container=t.container||document.createElement("div"),this.user=new y(t.user),this.pulseOpts=t.pulse||{},this.spidOpts=t.spid||{},this.events.on("clickTracking",function(t){if(t.target instanceof HTMLElement){var n=t.target.dataset;if(n.hasOwnProperty("action"))switch(n.action){case"agree":case"privacy-portal":case"dismiss":e.container.parentNode.removeChild(e.container),e.cookie.set("psi.show","0"),e.cookie.set("psi.zero_interactions","0")}}}),this.events.on("setPrivacyPortalUrl",function(t,n){if(n.logged_in_url&&n.non_logged_in_url){var i=m({user:e.user,notification:n});t.setAttribute("href",i)}})}return t.prototype.initialize=function(){return g(this,void 0,void 0,function(){var t,e,i,r=this;return b(this,function(o){switch(o.label){case 0:return t=[],[4,n.e(1).then(n.bind(null,9))];case 1:return e=o.sent().default,t.push(new e({version:this.pulseOpts.version,instance:this.pulseOpts.instance}).initialize()),null!==this.user.authenticated?[3,3]:[4,n.e(2).then(n.bind(null,10))];case 2:i=o.sent().default,t.push(new i({version:this.spidOpts.version}).initialize()),o.label=3;case 3:return Promise.all(t).then(function(t){var e=t[0],n=t[1];return g(r,void 0,void 0,function(){var t,i,r,o,c=this;return b(this,function(a){switch(a.label){case 0:return n?(t=this.user,(i=n.id)?[3,2]:[4,e.getEnvironmentId()]):[3,3];case 1:i=a.sent(),a.label=2;case 2:return t.id=i,this.user.authenticated=n.authenticated,[3,5];case 3:return r=this.user,[4,e.getEnvironmentId()];case 4:r.id=a.sent(),a.label=5;case 5:return this.user.id&&(o=new d({events:this.events,container:this.container,user:this.user}),new h({appId:this.appId,tracker:e,user:this.user,endpoint:this.backendEndpoint,entity:this.notification}).initialize().then(function(t){t.notifications.forEach(function(t){var e=v(c.cookie.get("psi.show"),1),n=v(c.cookie.get("psi.zero_interactions"),0)+1,i=parseInt(c.cookie.get("psi.timestamp"),10),r=i?Math.floor((Date.now()-i)/1e3/60/60/24):0,a=v(c.cookie.get("psi.notification.version"),0);(e||a<t.version&&t.force||!e&&r>=t.hide_for)&&(o.render(t),(a&&a<t.version&&t.force||!e&&r>=t.hide_for)&&(n=0,e=1),n>=t.hide_after&&(e=0),c.cookie.set("psi.notification.version",t.version.toString()),c.cookie.set("psi.show",e.toString()),c.cookie.set("psi.timestamp",Date.now().toString()),c.cookie.set("psi.zero_interactions",n.toString()))})})),[2]}})})}).catch(function(t){return console.log(t)}),[2]}})})},t}();!function(){function t(){if(window.privacyNotifierOpts){var t=window.privacyNotifierOpts;window.privacyNotifier=new k(t),window.privacyNotifier.initialize()}else console.error("[Privacy Notifier] Missing configuration window.privacyNotifierOpts")}"complete"===document.readyState||"interactive"===document.readyState?t():document.addEventListener("DOMContentLoaded",t)}()}]);