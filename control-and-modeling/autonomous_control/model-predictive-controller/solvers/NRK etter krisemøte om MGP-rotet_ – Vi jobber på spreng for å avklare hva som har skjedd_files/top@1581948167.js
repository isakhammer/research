!function(e,n,s,t,c,o,i){e[s]=e[s]||function(){(window[s].q=window[s].q||[]).push(arguments)},o=n.createElement(t),i=document.getElementsByTagName(t)[0],o.async=1,o.src="//sdk.pulse.schibsted.com/pulse.min.js",i.parentNode.insertBefore(o,i)}(window,document,"pulse","script");
!function(){"use strict";var e=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i={objectType:void 0},o={subscriber:!1,ranker:void 0,modelDate:void 0},t=function(){function n(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};r(this,n),this.tracker=e,this.config=Object.assign({},o,t),this.updateTrackerCurateMeta(t)}return e(n,[{key:"updateTrackerCurateMeta",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.subscriber,n=e.ranker,r=e.modelDate;this.tracker.update({object:{custom:{"spt:subscriber":t,"spt:ranker":n,"spt:modelDate":r,subscriber:t,ranker:n,modelDate:r}}},!0)}}]),n}();pulse("provide","helloCurate",t);var n=function(){function n(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};r(this,n),this.tracker=e,this.updateTrackerAbTestMeta(t)}return e(n,[{key:"updateTrackerAbTestMeta",value:function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];var e,t,n=(e="abx2",(t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)"))?t[2]:null);this.tracker.update({object:{custom:{abTestValue:n}}},!0)}}]),n}();function a(e){return"Article"===e||"Page"===e||"Frontpage"===e}pulse("provide","helloAbTest",n);var s=function(){function n(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};r(this,n),this.tracker=e,this.config=Object.assign({},i,t),this.updateTrackerState()}return e(n,[{key:"updateTrackerState",value:function(){var o=this,e=this.tracker.evaluateEventInputs();this.tracker.update({provider:e.then(function(e){return a(o.config.objectType||e.object.type)?{"spt:engage":e.provider.id}:{}}),object:e.then(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.object,n=e.device,r=e.provider,i=e.origin;return{custom:a(o.config.objectType||t.type)?{"spt:device":n.deviceType,"spt:permalink":t.url,"spt:referrer":i.url,"spt:site":r.id,"spt:url":t.url,"spt:articleId":"Article"===t.type?t.id:void 0,"spt:pageId":"Page"===t.type||"Frontpage"===t.type?t.id:void 0}:{}}})},!0)}}]),n}();pulse("provide","populateDefaultValues",s)}(),function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},a=Object.assign?Object.assign:function(n,e,t,r){for(var i=1;i<arguments.length;i++)o(Object(arguments[i]),function(e,t){n[t]=e});return n},t=function(){{if(Object.create)return function(e,t,n,r){var i=s(arguments,1);return a.apply(this,[Object.create(e)].concat(i))};function o(){}return function(e,t,n,r){var i=s(arguments,1);return o.prototype=e,a.apply(this,[new o].concat(i))}}}(),n=String.prototype.trim?function(e){return String.prototype.trim.call(e)}:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},r="undefined"!=typeof window?window:e,i={assign:a,create:t,trim:n,bind:function(e,t){return function(){return t.apply(e,Array.prototype.slice.call(arguments,0))}},slice:s,each:o,map:function(e,n){var r=c(e)?[]:{};return u(e,function(e,t){return r[t]=n(e,t),!1}),r},pluck:u,isList:c,isFunction:function(e){return e&&"[object Function]"==={}.toString.call(e)},isObject:function(e){return e&&"[object Object]"==={}.toString.call(e)},Global:r};function s(e,t){return Array.prototype.slice.call(e,t||0)}function o(e,n){u(e,function(e,t){return n(e,t),!1})}function u(e,t){if(c(e)){for(var n=0;n<e.length;n++)if(t(e[n],n))return e[n]}else for(var r in e)if(e.hasOwnProperty(r)&&t(e[r],r))return e[r]}function c(e){return null!=e&&"function"!=typeof e&&"number"==typeof e.length}var l=i.slice,f=i.pluck,p=i.each,d=i.bind,v=i.create,h=i.isList,g=i.isFunction,y=i.isObject,b={createStore:w},m={version:"2.0.12",enabled:!1,get:function(e,t){var n=this.storage.read(this._namespacePrefix+e);return this._deserialize(n,t)},set:function(e,t){return void 0===t?this.remove(e):(this.storage.write(this._namespacePrefix+e,this._serialize(t)),t)},remove:function(e){this.storage.remove(this._namespacePrefix+e)},each:function(n){var r=this;this.storage.each(function(e,t){n.call(r,r._deserialize(e),(t||"").replace(r._namespaceRegexp,""))})},clearAll:function(){this.storage.clearAll()},hasNamespace:function(e){return this._namespacePrefix=="__storejs_"+e+"_"},createStore:function(){return w.apply(this,arguments)},addPlugin:function(e){this._addPlugin(e)},namespace:function(e){return w(this.storage,this.plugins,e)}};function w(e,t,n){n||(n=""),e&&!h(e)&&(e=[e]),t&&!h(t)&&(t=[t]);var r=n?"__storejs_"+n+"_":"",i=n?new RegExp("^"+r):null;if(!/^[a-zA-Z0-9_\-]*$/.test(n))throw new Error("store.js namespaces can only have alphanumerics + underscores and dashes");var o=v({_namespacePrefix:r,_namespaceRegexp:i,_testStorage:function(e){try{var t="__storejs__test__";e.write(t,t);var n=e.read(t)===t;return e.remove(t),n}catch(e){return!1}},_assignPluginFnProp:function(r,e){var i=this[e];this[e]=function(){var n=l(arguments,0),e=this;var t=[function(){if(i)return p(arguments,function(e,t){n[t]=e}),i.apply(e,n)}].concat(n);return r.apply(e,t)}},_serialize:function(e){return JSON.stringify(e)},_deserialize:function(t,e){if(!t)return e;var n="";try{n=JSON.parse(t)}catch(e){n=t}return void 0!==n?n:e},_addStorage:function(e){this.enabled||this._testStorage(e)&&(this.storage=e,this.enabled=!0)},_addPlugin:function(n){var r=this;if(h(n))p(n,function(e){r._addPlugin(e)});else if(!f(this.plugins,function(e){return n===e})){if(this.plugins.push(n),!g(n))throw new Error("Plugins must be function values that return objects");var e=n.call(this);if(!y(e))throw new Error("Plugins must return an object of function properties");p(e,function(e,t){if(!g(e))throw new Error("Bad plugin property: "+t+" from plugin "+n.name+". Plugins should only return functions.");r._assignPluginFnProp(e,t)})}},addStorage:function(e){!function(){var e="undefined"==typeof console?null:console;e&&(e.warn?e.warn:e.log).apply(e,arguments)}("store.addStorage(storage) is deprecated. Use createStore([storages])"),this._addStorage(e)}},m,{plugins:[]});return o.raw={},p(o,function(e,t){g(e)&&(o.raw[t]=d(o,e))}),p(e,function(e){o._addStorage(e)}),p(t,function(e){o._addPlugin(e)}),o}var k=i.Global,j={name:"localStorage",read:T,write:function(e,t){return P().setItem(e,t)},each:function(e){for(var t=P().length-1;0<=t;t--){var n=P().key(t);e(T(n),n)}},remove:function(e){return P().removeItem(e)},clearAll:function(){return P().clear()}};function P(){return k.localStorage}function T(e){return P().getItem(e)}var E=i.trim,_={name:"cookieStorage",read:function(e){if(!e||!x(e))return null;var t="(?:^|.*;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*";return unescape(S.cookie.replace(new RegExp(t),"$1"))},write:function(e,t){if(!e)return;S.cookie=escape(e)+"="+escape(t)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/"},each:O,remove:I,clearAll:function(){O(function(e,t){I(t)})}},S=i.Global.document;function O(e){for(var t=S.cookie.split(/; ?/g),n=t.length-1;0<=n;n--)if(E(t[n])){var r=t[n].split("="),i=unescape(r[0]);e(unescape(r[1]),i)}}function I(e){e&&x(e)&&(S.cookie=escape(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/")}function x(e){return new RegExp("(?:^|;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(S.cookie)}var A=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var R="previousArticle",F="/i/",H="html",M="previousPage",C=["Page","Frontpage","Listing"],V="referringImpression",$={objectType:void 0};function N(e){var t=document.createElement("a");return t.setAttribute("href",e),t.hostname}function z(e){return Boolean(e)&&0<e.length}function D(e){return Boolean(e)&&(0<e.indexOf(F)||0<e.indexOf(H))}var L=function(){function n(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.tracker=e,this.store=b.createStore([j,_]),this.config=Object.assign({},$,t),this.update()}return A(n,[{key:"update",value:function(){this.updateTrackerState(),this.updatePersistedHistory()}},{key:"updateTrackerState",value:function(){var p=this;this.tracker.update({object:{custom:new Promise(function(f,e){p.tracker.evaluateEventInputs().then(function(e){var t,n,r={"spt:url":e.object.url,"spt:referrer":"","spt:isReferrerArticle":!1,"spt:referrerId":"","spt:previousReferrer":null,"spt:referringImpression":null};if(t=e.origin.url,n=e.object.url,!z(t)||!z(n)||N(t)!==N(n))return f(r);var i,o,a=(p.config.objectType?{type:p.config.objectType}:e.object).type;if("Article"!==a&&"SalesPoster"!==a)return-1!==C.indexOf(a)?f({"spt:url":e.object.url,"spt:referrer":e.origin.url}):f(r);var s=p.store.get(M),u=p.store.get(R);u&&(i=e.origin.url,o=u.referrer,z(i)&&z(o)&&D(i)&&D(o)||(u=!1));var c=s||u,l=p.store.get(V);return f({"spt:url":e.object.url,"spt:referrer":e.origin.url,"spt:isReferrerArticle":Boolean(u),"spt:referrerId":c?c.id:e.origin.url,"spt:previousReferrer":c?c.referrer:null,"spt:referringImpression":l||null})}).catch(e)})}},!0)}},{key:"updatePersistedHistory",value:function(){var n=this;this.tracker.evaluateEventInputs().then(function(e){var t=e.object.type;"Article"===t?n.updatePersistedArticleHistory():-1!==C.indexOf(t)?n.updatePersistedPageHistory():"SalesPoster"===t&&n.updatePersistedSalesPosterHistory()})}},{key:"updatePersistedPageHistory",value:function(){var t=this;this.store.set(R,null),this.store.set(V,null),this.tracker.evaluateEventInputs().then(function(e){t.store.set(M,{url:t.url,referrer:t.referrer,id:e.object.id})})}},{key:"updatePersistedArticleHistory",value:function(){var t=this;this.store.set(M,null),this.store.set(V,null),this.tracker.evaluateEventInputs().then(function(e){t.store.set(R,{url:e.object.url,referrer:e.origin.url,id:e.object.id})})}},{key:"updatePersistedSalesPosterHistory",value:function(){}},{key:"updatePersistedImpressionHistory",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(e&&e.hasOwnProperty("impression")){var n=e.impression;this.tracker.evaluateEventInputs().then(function(e){n.pageViewId=t.tracker.getPageViewId(),n.url=e.object.url,n.referrer=e.origin.url,t.store.set(V,n)})}}}]),n}();pulse("provide","localHistory",L)}(),function(){"use strict";var b=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t="object"==typeof e&&e&&e.Object===Object&&e,n="object"==typeof self&&self&&self.Object===Object&&self,r=t||n||Function("return this")(),m=function(){return r.Date.now()},i=r.Symbol,o=Object.prototype,a=o.hasOwnProperty,s=o.toString,u=i?i.toStringTag:void 0;var c=function(e){var t=a.call(e,u),n=e[u];try{var r=!(e[u]=void 0)}catch(e){}var i=s.call(e);return r&&(t?e[u]=n:delete e[u]),i},l=Object.prototype.toString;var f=function(e){return l.call(e)},p=i?i.toStringTag:void 0;var d=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":p&&p in Object(e)?c(e):f(e)};var v=function(e){return null!=e&&"object"==typeof e};var h=function(e){return"symbol"==typeof e||v(e)&&"[object Symbol]"==d(e)},g=/^\s+|\s+$/g,y=/^[-+]0x[0-9a-f]+$/i,w=/^0b[01]+$/i,k=/^0o[0-7]+$/i,j=parseInt;var P=function(e){if("number"==typeof e)return e;if(h(e))return NaN;if(b(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=b(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(g,"");var n=w.test(e);return n||k.test(e)?j(e.slice(2),n?2:8):y.test(e)?NaN:+e},T=Math.max,E=Math.min;var _=function(r,i,e){var o,a,s,u,c,l,f=0,p=!1,d=!1,t=!0;if("function"!=typeof r)throw new TypeError("Expected a function");function v(e){var t=o,n=a;return o=a=void 0,f=e,u=r.apply(n,t)}function h(e){var t=e-l;return void 0===l||i<=t||t<0||d&&s<=e-f}function g(){var e,t,n=m();if(h(n))return y(n);c=setTimeout(g,(t=i-((e=n)-l),d?E(t,s-(e-f)):t))}function y(e){return c=void 0,t&&o?v(e):(o=a=void 0,u)}function n(){var e,t=m(),n=h(t);if(o=arguments,a=this,l=t,n){if(void 0===c)return f=e=l,c=setTimeout(g,i),p?v(e):u;if(d)return c=setTimeout(g,i),v(l)}return void 0===c&&(c=setTimeout(g,i)),u}return i=P(i)||0,b(e)&&(p=!!e.leading,s=(d="maxWait"in e)?T(P(e.maxWait)||0,i):s,t="trailing"in e?!!e.trailing:t),n.cancel=function(){void 0!==c&&clearTimeout(c),o=l=a=c=void(f=0)},n.flush=function(){return void 0===c?u:y(m())},n};var S=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return b(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),_(e,t,{leading:r,maxWait:t,trailing:i})},O=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var I=function(){return(new Date).getTime()},x={pingInterval:5e3,updateInterval:500,windowEvents:["focus","resize","scroll"],bodyEvents:["beforeunload","focus","mousemove","mousedown","keydown"],containerQuery:"body"};var A=function(){function r(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.tracker=e,this.config=Object.assign({},x,n),this.throttledUpdate=S(function(){return t.update()},this.config.updateInterval),this.start()}return O(r,[{key:"start",value:function(){var e=this;this.pingCount=0,this.lastTimeActive=I(),this.lastTimeReported=I(),this.scrollPosition=0,this.containerViewPercentage=0,this.pingIntervalRef=setInterval(function(){return e.ping()},this.config.pingInterval),this.bind()}},{key:"stop",value:function(){this.lastTimeActive=void 0,this.lastTimeReported=void 0,this.scrollPosition=void 0,this.containerViewPercentage=void 0,clearInterval(this.pingIntervalRef),this.unbind()}},{key:"ping",value:function(){if(this.lastTimeActive>this.lastTimeReported){this.pingCount+=1;var e=Object.assign({},this.config.event,{duration:this.pingCount*this.config.pingInterval,scrollPosition:this.scrollPosition,object:{custom:{"spt:articleViewedPercentage":this.containerViewPercentage}}});this.tracker.track("engagementEvent",e),this.lastTimeReported=I()}}},{key:"updateScrollPosition",value:function(){var e=Math.max(0,Math.round(window.pageYOffset||document.scrollTop)-(document.clientTop||0));e>this.scrollPosition&&(this.scrollPosition=e);var t,n,r,i=document.querySelector(this.config.containerQuery)||document.body,o=Math.round(100/i.offsetHeight*(n=(t=i).getBoundingClientRect(),(r=t.offsetHeight-n.bottom+window.innerHeight)<=0?0:Math.min(r,t.offsetHeight)));o>this.containerViewPercentage&&o<=100&&(this.containerViewPercentage=o)}},{key:"update",value:function(){this.updateScrollPosition(),this.lastTimeActive=I()}},{key:"bind",value:function(){var t=this;this.config.windowEvents&&this.config.windowEvents.forEach(function(e){window.addEventListener(e,t.throttledUpdate)}),this.config.bodyEvents&&this.config.bodyEvents.forEach(function(e){document.body.addEventListener(e,t.throttledUpdate)})}},{key:"unbind",value:function(){var t=this;this.config.windowEvents&&this.config.windowEvents.forEach(function(e){window.removeEventListener(e,t.throttledUpdate)}),this.config.bodyEvents&&this.config.bodyEvents.forEach(function(e){document.body.removeEventListener(e,t.throttledUpdate)})}},{key:"restart",value:function(){this.stop(),this.start()}}]),r}();pulse("provide","engagementTime",A)}();
function hasLocalStorage(){var t=!1;try{(t=window.localStorage)&&t.setItem&&t.getItem&&t.removeItem||(t=!1),t.setItem("test","test"),t.removeItem("test")}catch(e){console.log("Unable to get a working localStorage instance, probably security settings:",e),t=!1}return t}var fastenLocalStorage=hasLocalStorage();function spidToPulse(){var o=fastenLocalStorage,a={actor:{id:!1,subscriptionName:"False",realm:"spid.no"}};o&&null!==o.getItem("spidUserId")&&(a.actor.id=o.getItem("spidUserId"),-1<document.cookie.indexOf("SP_ABO")&&(a.actor.subscriptionName="Abo"),pulse("update",a)),sndPaywallSession.Event.subscribe("auth.sessionChange",function(e){if(null!==(s=e).session&&s.session.defaultAgreementAccepted&&s.session.clientAgreementAccepted&&"undefined"!==s.session.userId){var t=e.session.userId;a.actor.id=t,pulse("update",a),o&&o.setItem("spidUserId",t)}else pulse("update",{actor:void 0}),o&&o.removeItem("spidUserId");var s}),sndPaywallSession.Event.subscribe("productChange",function(e){e&&e.session&&e.session.result?a.actor.subscriptionName="Abo":a.actor.subscriptionName="Not";pulse("update",a)})}function curateData(t){var s=fastenLocalStorage,e="curate",o="experiment",a="insight-front";if(s){if(!t){var n={};return r(o),r(e),r(a),n}i(o),i(e),i(a)}return!1;function r(e){var t=s.getItem(e);null!==t&&(n[e]=JSON.parse(t))}function i(e){t.hasOwnProperty(e)&&s.setItem(e,JSON.stringify(t[e]))}}
!function(){var n=function(){var t,n={},e=this.document.createElement("div");return t="<P><I></P></I>",e.innerHTML=t,n.tagSoup=e.innerHTML!==t,e.innerHTML="<P><i><P></P></i></P>",n.selfClose=2===e.childNodes.length,n}(),i=/^<([\-A-Za-z0-9_]+)((?:\s+[\w\-]+(?:\s*=?\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,r=/^<\/([\-A-Za-z0-9_]+)[^>]*>/,s=/([\-A-Za-z0-9_]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,o=/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noresize|noshade|nowrap|readonly|selected)$/i,u=!1;function t(g,f){for(var t in g=g||"",f=f||{},n)n.hasOwnProperty(t)&&(f.autoFix&&(f["fix_"+t]=!0),f.fix=f.fix||f["fix_"+t]);var l=function(t){g=t+g},e={comment:/^<!--/,endTag:/^<\//,atomicTag:/^<\s*(script|style|noscript|iframe|textarea)[\s\/>]/i,startTag:/^</,chars:/^[^<]/},a={comment:function(){var t=g.indexOf("--\x3e");if(0<=t)return{content:g.substr(4,t),length:t+3}},endTag:function(){var t=g.match(r);if(t)return{tagName:t[1],length:t[0].length}},atomicTag:function(){var t=a.startTag();if(t){var n=g.slice(t.length);if(n.match(new RegExp("</\\s*"+t.tagName+"\\s*>","i"))){var e=n.match(new RegExp("([\\s\\S]*?)</\\s*"+t.tagName+"\\s*>","i"));if(e)return{tagName:t.tagName,attrs:t.attrs,content:e[1],length:e[0].length+t.length}}}},startTag:function(){var t=g.match(i);if(t){var r={};return t[2].replace(s,function(t,n){var e,a=arguments[2]||arguments[3]||arguments[4]||o.test(n)&&n||null;r[n]="string"==typeof(e=a)?e.replace(/(&#\d{1,4};)/gm,function(t){var n=t.substring(2,t.length-1);return String.fromCharCode(n)}):e}),{tagName:t[1],attrs:r,unary:!!t[3],length:t[0].length}}},chars:function(){var t=g.indexOf("<");return{length:0<=t?t:g.length}}},m=function(){for(var t in e)if(e[t].test(g)){u&&console.log("suspected "+t);var n=a[t]();return n?(u&&console.log("parsed "+t,n),n.type=n.type||t,n.text=g.substr(0,n.length),g=g.slice(n.length),n):null}};return f.fix&&function(){var n=/^(AREA|BASE|BASEFONT|BR|COL|FRAME|HR|IMG|INPUT|ISINDEX|LINK|META|PARAM|EMBED)$/i,e=/^(COLGROUP|DD|DT|LI|OPTIONS|P|TD|TFOOT|TH|THEAD|TR)$/i,a=[];a.last=function(){return this[this.length-1]},a.lastTagNameEq=function(t){var n=this.last();return n&&n.tagName&&n.tagName.toUpperCase()===t.toUpperCase()},a.containsTagName=function(t){for(var n,e=0;n=this[e];e++)if(n.tagName===t)return!0;return!1};var r=function(t){return t&&"startTag"===t.type&&(t.unary=n.test(t.tagName)||t.unary),t},i=m,s=function(){var t=a.pop();l("</"+t.tagName+">")},o={startTag:function(t){var n=t.tagName;"TR"===n.toUpperCase()&&a.lastTagNameEq("TABLE")?(l("<TBODY>"),c()):f.fix_selfClose&&e.test(n)&&a.containsTagName(n)?a.lastTagNameEq(n)?s():(l("</"+t.tagName+">"),c()):t.unary||a.push(t)},endTag:function(t){a.last()?f.fix_tagSoup&&!a.lastTagNameEq(t.tagName)?s():a.pop():f.fix_tagSoup&&u()}},u=function(){i(),c()},c=function(){var t,n,e=(t=g,n=r(i()),g=t,n);e&&o[e.type]&&o[e.type](e)};m=function(){return c(),r(i())}}(),{append:function(t){g+=t},readToken:m,readTokens:function(t){for(var n;n=m();)if(t[n.type]&&!1===t[n.type](n))return},clear:function(){var t=g;return g="",t},rest:function(){return g},stack:[]}}for(var e in t.supports=n,t.tokenToString=function(t){var n={comment:function(t){return"<--"+t.content+"--\x3e"},endTag:function(t){return"</"+t.tagName+">"},atomicTag:function(t){return console.log(t),n.startTag(t)+t.content+n.endTag(t)},startTag:function(t){var n="<"+t.tagName;for(var e in t.attrs){var a=t.attrs[e];n+=" "+e+'="'+(a?a.replace(/(^|[^\\])"/g,'$1\\"'):"")+'"'}return n+(t.unary?"/>":">")},chars:function(t){return t.text}};return n[t.type](t)},t.escapeAttributes=function(t){var n={};for(var e in t){var a=t[e];n[e]=a&&a.replace(/(^|[^\\])"/g,'$1\\"')}return n},n)t.browserHasFlaw=t.browserHasFlaw||!n[e]&&e;this.htmlParser=t}();
!function(){var e=function(){var t,e={},r=this.document.createElement("div");return t="<P><I></P></I>",r.innerHTML=t,e.tagSoup=r.innerHTML!==t,r.innerHTML="<P><i><P></P></i></P>",e.selfClose=2===r.childNodes.length,e}(),a=/^<([\-A-Za-z0-9_]+)((?:\s+[\w\-]+(?:\s*=?\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,i=/^<\/([\-A-Za-z0-9_]+)[^>]*>/,o=/([\-A-Za-z0-9_]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,s=/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noresize|noshade|nowrap|readonly|selected)$/i,c=!1;function t(p,l){for(var t in p=p||"",l=l||{},e)e.hasOwnProperty(t)&&(l.autoFix&&(l["fix_"+t]=!0),l.fix=l.fix||l["fix_"+t]);var f=function(t){p=t+p},r={comment:/^<!--/,endTag:/^<\//,atomicTag:/^<\s*(script|style|noscript|iframe|textarea)[\s\/>]/i,startTag:/^</,chars:/^[^<]/},n={comment:function(){var t=p.indexOf("--\x3e");if(0<=t)return{content:p.substr(4,t),length:t+3}},endTag:function(){var t=p.match(i);if(t)return{tagName:t[1],length:t[0].length}},atomicTag:function(){var t=n.startTag();if(t){var e=p.slice(t.length);if(e.match(new RegExp("</\\s*"+t.tagName+"\\s*>","i"))){var r=e.match(new RegExp("([\\s\\S]*?)</\\s*"+t.tagName+"\\s*>","i"));if(r)return{tagName:t.tagName,attrs:t.attrs,content:r[1],length:r[0].length+t.length}}}},startTag:function(){var t=p.match(a);if(t){var i={};return t[2].replace(o,function(t,e){var r,n=arguments[2]||arguments[3]||arguments[4]||s.test(e)&&e||null;i[e]="string"==typeof(r=n)?r.replace(/(&#\d{1,4};)/gm,function(t){var e=t.substring(2,t.length-1);return String.fromCharCode(e)}):r}),{tagName:t[1],attrs:i,unary:!!t[3],length:t[0].length}}},chars:function(){var t=p.indexOf("<");return{length:0<=t?t:p.length}}},h=function(){for(var t in r)if(r[t].test(p)){c&&console.log("suspected "+t);var e=n[t]();return e?(c&&console.log("parsed "+t,e),e.type=e.type||t,e.text=p.substr(0,e.length),p=p.slice(e.length),e):null}};return l.fix&&function(){var e=/^(AREA|BASE|BASEFONT|BR|COL|FRAME|HR|IMG|INPUT|ISINDEX|LINK|META|PARAM|EMBED)$/i,r=/^(COLGROUP|DD|DT|LI|OPTIONS|P|TD|TFOOT|TH|THEAD|TR)$/i,n=[];n.last=function(){return this[this.length-1]},n.lastTagNameEq=function(t){var e=this.last();return e&&e.tagName&&e.tagName.toUpperCase()===t.toUpperCase()},n.containsTagName=function(t){for(var e,r=0;e=this[r];r++)if(e.tagName===t)return!0;return!1};var i=function(t){return t&&"startTag"===t.type&&(t.unary=e.test(t.tagName)||t.unary),t},a=h,o=function(){var t=n.pop();f("</"+t.tagName+">")},s={startTag:function(t){var e=t.tagName;"TR"===e.toUpperCase()&&n.lastTagNameEq("TABLE")?(f("<TBODY>"),u()):l.fix_selfClose&&r.test(e)&&n.containsTagName(e)?n.lastTagNameEq(e)?o():(f("</"+t.tagName+">"),u()):t.unary||n.push(t)},endTag:function(t){n.last()?l.fix_tagSoup&&!n.lastTagNameEq(t.tagName)?o():n.pop():l.fix_tagSoup&&c()}},c=function(){a(),u()},u=function(){var t,e,r=(t=p,e=i(a()),p=t,e);r&&s[r.type]&&s[r.type](r)};h=function(){return u(),i(a())}}(),{append:function(t){p+=t},readToken:h,readTokens:function(t){for(var e;e=h();)if(t[e.type]&&!1===t[e.type](e))return},clear:function(){var t=p;return p="",t},rest:function(){return p},stack:[]}}for(var r in t.supports=e,t.tokenToString=function(t){var e={comment:function(t){return"<--"+t.content+"--\x3e"},endTag:function(t){return"</"+t.tagName+">"},atomicTag:function(t){return console.log(t),e.startTag(t)+t.content+e.endTag(t)},startTag:function(t){var e="<"+t.tagName;for(var r in t.attrs){var n=t.attrs[r];e+=" "+r+'="'+(n?n.replace(/(^|[^\\])"/g,'$1\\"'):"")+'"'}return e+(t.unary?"/>":">")},chars:function(t){return t.text}};return e[t.type](t)},t.escapeAttributes=function(t){var e={};for(var r in t){var n=t[r];e[r]=n&&n.replace(/(^|[^\\])"/g,'$1\\"')}return e},e)t.browserHasFlaw=t.browserHasFlaw||!e[r]&&r;this.htmlParser=t}(),function(){function l(){}var o={afterAsync:l,afterDequeue:l,afterStreamStart:l,afterWrite:l,beforeEnqueue:l,beforeWrite:function(t){return t},done:l,error:function(t){throw t},releaseAsync:!1},f=this,e=void 0;function h(t){return t!==e&&null!==t}if(!f.postscribe){var t=Array.prototype.slice,d=function(){var o="data-ps-";function i(t,e,r){var n=o+e;if(2===arguments.length){var i=t.getAttribute(n);return h(i)?String(i):i}h(r)&&""!==r?t.setAttribute(n,r):t.removeAttribute(n)}function t(t,e){var r=t.ownerDocument;m(this,{root:t,options:e,win:r.defaultView||r.parentWindow,doc:r,parser:htmlParser("",{autoFix:!0}),actuals:[t],proxyHistory:"",proxyRoot:r.createElement(t.nodeName),scriptStack:[],writeQueue:[]}),i(this.proxyRoot,"proxyof",0)}return t.prototype.write=function(){var t;for([].push.apply(this.writeQueue,arguments);!this.deferredRemote&&this.writeQueue.length;)g(t=this.writeQueue.shift())?this.callFunction(t):this.writeImpl(t)},t.prototype.callFunction=function(t){var e={type:"function",value:t.name||t.toString()};this.onScriptStart(e),t.call(this.win,this.doc),this.onScriptDone(e)},t.prototype.writeImpl=function(t){this.parser.append(t);for(var e,r,n,i,a,o=[];(e=this.parser.readToken())&&!(r=!!((a=e)&&"tagName"in a)&&!!~a.tagName.toLowerCase().indexOf("script"))&&!(n=!!((i=e)&&"tagName"in i)&&!!~i.tagName.toLowerCase().indexOf("style"));)o.push(e);this.writeStaticTokens(o),r&&this.handleScriptToken(e),n&&this.handleStyleToken(e)},t.prototype.writeStaticTokens=function(t){var e=this.buildChunk(t);if(e.actual)return e.html=this.proxyHistory+e.actual,this.proxyHistory+=e.proxy,this.proxyRoot.innerHTML=e.html,this.walkChunk(),e},t.prototype.buildChunk=function(t){var r=this.actuals.length,n=[],i=[],a=[];return s(t,function(t){if(n.push(t.text),t.attrs){if(!/^noscript$/i.test(t.tagName)){var e=r++;i.push(t.text.replace(/(\/?>)/," "+o+"id="+e+" $1")),"ps-script"!==t.attrs.id&&"ps-style"!==t.attrs.id&&a.push("atomicTag"===t.type?"":"<"+t.tagName+" "+o+"proxyof="+e+(t.unary?" />":">"))}}else i.push(t.text),a.push("endTag"===t.type?t.text:"")}),{tokens:t,raw:n.join(""),actual:i.join(""),proxy:a.join("")}},t.prototype.walkChunk=function(){for(var t,e=[this.proxyRoot];h(t=e.shift());){var r=1===t.nodeType;if(!(r&&i(t,"proxyof"))){r&&i(this.actuals[i(t,"id")]=t,"id",null);var n=t.parentNode&&i(t.parentNode,"proxyof");n&&this.actuals[n].appendChild(t)}e.unshift.apply(e,v(t.childNodes))}},t.prototype.handleScriptToken=function(t){var e=this.parser.clear();e&&this.writeQueue.unshift(e),t.src=t.attrs.src||t.attrs.SRC,t.src&&this.scriptStack.length?this.deferredRemote=t:this.onScriptStart(t);var r=this;this.writeScriptToken(t,function(){r.onScriptDone(t)})},t.prototype.handleStyleToken=function(t){var e=this.parser.clear();e&&this.writeQueue.unshift(e),t.type=t.attrs.type||t.attrs.TYPE||"text/css",this.writeStyleToken(t),e&&this.write()},t.prototype.writeStyleToken=function(t){var e=this.buildStyle(t);this.insertStyle(e),t.content&&(e.styleSheet&&!e.sheet?e.styleSheet.cssText=t.content:e.appendChild(this.doc.createTextNode(t.content)))},t.prototype.buildStyle=function(t){var r=this.doc.createElement(t.tagName);return r.setAttribute("type",t.type),y(t.attrs,function(t,e){r.setAttribute(t,e)}),r},t.prototype.insertStyle=function(t){this.writeImpl('<span id="ps-style"/>');var e=this.doc.getElementById("ps-style");e.parentNode.replaceChild(t,e)},t.prototype.onScriptStart=function(t){t.outerWrites=this.writeQueue,this.writeQueue=[],this.scriptStack.unshift(t)},t.prototype.onScriptDone=function(t){t===this.scriptStack[0]?(this.scriptStack.shift(),this.write.apply(this,t.outerWrites),!this.scriptStack.length&&this.deferredRemote&&(this.onScriptStart(this.deferredRemote),this.deferredRemote=null)):this.options.error({message:"Bad script nesting or script finished twice"})},t.prototype.writeScriptToken=function(t,e){var r=this.buildScript(t),n=this.shouldRelease(r),i=this.options.afterAsync;t.src&&(r.src=t.src,this.scriptLoadHandler(r,n?i:function(){e(),i()}));try{this.insertScript(r),t.src&&!n||e()}catch(t){this.options.error(t),e()}},t.prototype.buildScript=function(t){var r=this.doc.createElement(t.tagName);return y(t.attrs,function(t,e){r.setAttribute(t,e)}),t.content&&(r.text=t.content),r},t.prototype.insertScript=function(t){this.writeImpl('<span id="ps-script"/>');var e=this.doc.getElementById("ps-script");e.parentNode.replaceChild(t,e)},t.prototype.scriptLoadHandler=function(e,r){function n(){e=e.onload=e.onreadystatechange=e.onerror=null}var i=this.options.error;function t(){n(),r()}m(e,{onload:function(){t()},onreadystatechange:function(){/^(loaded|complete)$/.test(e.readyState)&&t()},onerror:function(){var t;t={message:"remote script failed "+e.src},n(),i(t),r()}})},t.prototype.shouldRelease=function(t){return!/^script$/i.test(t.nodeName)||!!(this.options.releaseAsync&&t.src&&t.hasAttribute("async"))},t}();f.postscribe=function(){var s=0,a=[],c=null;function u(){var t,e,r=a.shift();r&&((t=(e=r)[e.length-1]).afterDequeue(),r.stream=function(t,e,n){(c=new d(t,n)).id=s++,c.name=n.name||c.id,p.streams[c.name]=c;var r=t.ownerDocument,i={close:r.close,open:r.open,write:r.write,writeln:r.writeln};function a(t){t=n.beforeWrite(t),c.write(t),n.afterWrite(t)}m(r,{close:l,open:l,write:function(){return a(v(arguments).join(""))},writeln:function(){return a(v(arguments).join("")+"\n")}});var o=c.win.onerror||l;return c.win.onerror=function(t,e,r){n.error({msg:t+" - "+e+":"+r}),o.apply(c.win,arguments)},c.write(e,function(){m(r,i),c.win.onerror=o,n.done(),c=null,u()}),c}.apply(null,r),t.afterStreamStart())}function p(t,e,r){var n;g(r)&&(r={done:r}),n=(n=r)||{},y(o,function(t,e){h(n[t])||(n[t]=e)}),r=n;var i=[t=/^#/.test(t)?f.document.getElementById(t.substr(1)):t.jquery?t[0]:t,e,r];return t.postscribe={cancel:function(){i.stream?i.stream.abort():i[1]=l}},r.beforeEnqueue(i),a.push(i),c||u(),t.postscribe}return m(p,{streams:{},queue:a,WriteStream:d})}()}function g(t){return"function"==typeof t}function s(t,e,r){var n,i=t&&t.length||0;for(n=0;n<i;n++)e.call(r,t[n],n)}function y(t,e,r){var n;for(n in t)t.hasOwnProperty(n)&&e.call(r,n,t[n])}function m(r,t){return y(t,function(t,e){r[t]=e}),r}function v(e){try{return t.call(e)}catch(t){var r=[];return s(e,function(t){r.push(t)}),r}}}();
//# sourceMappingURL=maps/top@1581948167.js.map
