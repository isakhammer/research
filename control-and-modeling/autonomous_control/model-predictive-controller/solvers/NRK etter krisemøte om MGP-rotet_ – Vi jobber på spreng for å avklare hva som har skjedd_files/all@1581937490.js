!function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=4)}([function(e,n){e.exports={selectors:{LOGIN:".ch-login",SUBSCRIBE_BTN:".ch-list-item-special",SUBSCRIBE_BTN_CONTAINER:".ch-subscribe-btn-container",SUBHEADER_LINKS:".ch-sub-links",LOGOUT_BTN:".ch-btn-logout",LOGIN_BTN:".ch-btn-login",BENEFITS_LINK:".ch-benefits-link",MY_SITE_LINK:".ch-my-site-link",MENU_ICON:".ch-menu-icon",MENU_ICON_BOX:".ch-menu-icon-box",MENU_ICON_USER:".ch-menu-icon-user",SECTION_NAV_TRIGGER:".ch-menu-group-nav .ch-icon",PERKS:".ch-perks",MENU_TRIGGER:".ch-menu-trigger",SUBHEADER_NAV_TRIGGER:".ch-dropdown-trigger",SUBHEADER_DROPDOWN:".ch-subsections-container",WIDGETS:".ch-widgets",PERKS_CARD:".ch-perks-card",PERKS_PRODUCTS:".ch-perks-products",ALERTS_BELL:".ch-alerts",CORE_HEADER:".ch-core-header",NAV_MENU:".ch-menu-group-nav",SECTIONS_MENU:".ch-menu-area-nav",INFO_MENU:".ch-menu-group-info",USER_MENU_CONTAINER:"#ch-menu .ch-inner-container .ch-inner-container-wrapper",USER_MENU:".ch-menu-area-user",USER_CARD:".ch-menu-user-card",PUBLICATION_MENU:".ch-menu-area-pub",SITEMAP_OPEN_TRIGGER:".ch-sitemap-trigger",SITEMAP_CLOSE_TRIGGER:".ch-sitemap-title",SITEMAP:".ch-menu-area-sitemap",ABOUT_LINK:".ch-menu-area-pub a",EDITORIAL_SECTION_LINK:".ch-subsections a",EDITORIAL_SECONDARY_LINK:".ch-menu-subsections a",EDITORIAL_TOP_LINK:".ch-menu-section",FEATURED_LINK:".ch-main-links a",SEARCH_FORM:".ch-search",ALERTS_LINK:".ch-alerts-link",ALERTS_COUNT:".ch-alerts-count",LOGIN_USER_NAME:".ch-user-name",MENU_STATE:"#ch-menu-state",QUICK_SEARCH_RESULT:"#ch-qs-result",QUICK_SEARCH_QUERY:"#ch-qs-query",QUICK_SEARCH_LOADER:"#ch-qs-loader",QUICK_SEARCH_CLEANER:"#ch-qs-cleaner",BOOKMARKS:"#ch-bookmarks"},attributes:{PUBLICATION_ID:"data-publication-id",PERKS_HOST:"data-perks-host",PRODUCT_CODE:"data-paywall-prodcode"},classes:{IS_OPEN:"is-open",SHOW_SITEMAP:"show-sitemap",LOGGED_IN:"logged-in",VISIBLE:"visible"},categories:{MENU:"Menu"},actions:{OPEN:"Open",SEARCH:"Search",FEATURED_LINK:"Featured link",EDITORIAL_TOP:"Editorial - Top level",EDITORIAL_SECONDARY:"Editorial - Secondary",EDITORIAL_SECTION:"Editorial - Section",EXPAND_DROPDOWN:"Expand dropdown",CLOSE_DROPDOWN:"Close dropdown",MY_ACCOUNT:"My Account",ABOUT:"About",PERKS:"Perks",NOTIFICATION:"Notification",LOG_IN:"Log in",LOG_OUT:"Log out"},labels:{OPEN:"Open"},productCodes:{notRequiringSubscription:998},quickSearch:{defaultDelay:300,defaultMinChars:3,showMaxResults:6,payWallMeterBasedBehaviour:"meterBased",sectionByRelatedData:"byRelatedData"},translations:{okonomi:"Ã¸konomi"}}},function(e,n,t){var r=t(2);e.exports={create:function(e){return{setState:function(n){var t=e.render(n,r.nodeFromTemplate),o=document.querySelector(e.selectors.parent),s=o.querySelector(e.selectors.ref),i=e.selectors.sibling&&o.querySelector(e.selectors.sibling)||null;t&&s&&e.update?e.update(t,s):r.updateNode(t,s,i,o)}}}}},function(e,n,t){var r=t(8);function o(e){var n=document.createElement("div");return n.innerHTML=e,n.firstChild}function s(e,n){return r.render(e,n)}function i(e,n){return e.className.split(" ").indexOf(n)>-1}e.exports={htmlToNode:o,getCookie:function(e){for(var n=e+"=",t=decodeURIComponent(document.cookie).split(";"),r=0;r<t.length;r++){for(var o=t[r];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(n))return o.substring(n.length,o.length)}return null},renderTemplate:s,nodeFromTemplate:function(e,n){return o(s(e,n))},updateNode:function(e,n,t,r){n&&r.removeChild(n),e&&r.insertBefore(e,t)},fetch:function(e,n){var t=new XMLHttpRequest,r=e.uri;if(e.responseType||(e.responseType="json"),e.params)for(var o in r+="?",e.params)e.params.hasOwnProperty(o)&&(r+=encodeURIComponent(o)+"="+encodeURIComponent(e.params[o]));if(t.open("GET",r,!0),e.headers)for(var s in e.headers)e.headers.hasOwnProperty(s)&&t.setRequestHeader(s,e.headers[s]);t.timeout=e.timeout||1e4,t.onreadystatechange=function(){var o,s;t.readyState===XMLHttpRequest.DONE&&(200<=t.status&&t.status<300?(o="json"===e.responseType?JSON.parse(t.responseText):t.responseText,s=null):(o=null,s={uri:r,status:t.status}),n(s,o))},t.ontimeout=function(e){n(e,null)},t.send()},shuffle:function(e){for(var n,t,r=e.length;0!==r;)t=Math.floor(Math.random()*r),n=e[r-=1],e[r]=e[t],e[t]=n;return e},hasClass:i,addClass:function(e,n){i(e,n)||(e.className+=" "+n)},removeClass:function(e,n){if(i(e,n)){var t=e.className.split(" ");t.splice(t.indexOf(n),1),e.className=t.join(" ")}},featureFlag:function(e,n,t){n.indexOf(e)>-1&&t()},checkRequiredParameters:function(e,n){e.forEach(function(e){if(!n.hasOwnProperty(e)||void 0===n[e])throw new Error('Lack of "'+e+'" required parameter')})},loadScript:function(e,n){var t=document.getElementById(e);if(null===t){var r=document.createElement("script");r.onload=function(){n()},r.onerror=function(e){r.loadError=e,n(e)},r.id=e,r.src=e;try{document.head.appendChild(r)}catch(e){r.loadError=e,n(e)}}else n(t.loadError)},getLocalStorage:function(e){if(function(){try{return window.localStorage.setItem("ls-test-key","1"),window.localStorage.removeItem("ls-test-key"),!0}catch(e){return!1}}())return window.localStorage.getItem(e)}}},function(e,n,t){"use strict";var r=Object.prototype.propertyIsEnumerable;function o(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function s(e){var n=Object.getOwnPropertyNames(e);return Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(e))),n.filter(function(n){return r.call(e,n)})}e.exports=Object.assign||function(e,n){for(var t,r,i=o(e),a=1;a<arguments.length;a++){t=arguments[a],r=s(Object(t));for(var c=0;c<r.length;c++)i[r[c]]=t[r[c]]}return i}},function(e,n,t){var r=t(0).selectors,o=t(0).classes,s=t(0).attributes,i=t(0).categories,a=t(0).actions,c=t(0).labels,l=t(5),u=t(9),d=t(11),p=t(13),h=t(15),f=t(17),m=t(19),g=t(2).fetch,E=t(2).getCookie,k=t(2).getLocalStorage,S=t(21),v=t(22),y=t(23),b=t(24),I=t(25);try{!function(e){if(document.querySelector(r.CORE_HEADER)&&!e._coreHeader){var n,t,N=e.__CORE_HEADER_CONFIG__,_=document.querySelector("["+s.PRODUCT_CODE+"]"),T=_&&_.getAttribute(s.PRODUCT_CODE),L=parseInt(E("abx2"))>=50,O=k("bookmarks"),R={matrix:N.matrix&&v({host:N.matrix.host,publication:N.publicationId,version:N.matrix.version,fetch:g}),perks:N.perks&&T&&S({publication:N.publicationId,host:N.perks.host,fetch:g}),ga:y(),clickTrackHelper:b(),pulse:I()},C={login:l({selectors:{ref:r.LOGIN,parent:r.WIDGETS,sibling:r.MENU_TRIGGER,userName:r.LOGIN_USER_NAME},mySiteUrl:N.userMenu.mySite.url,enableLoginButtonExperiment:"aftenposten"==N.publicationId,onLoginClick:M}),userMenu:u({selectors:{ref:r.USER_MENU,parent:r.INFO_MENU,sibling:r.PUBLICATION_MENU,logoutBtn:r.LOGOUT_BTN,loginBtn:r.LOGIN_BTN,benefitsLink:r.BENEFITS_LINK,mySiteLink:r.MY_SITE_LINK},links:N.userMenu,onLoginClick:M,onLogoutClick:function(n){var t=n.currentTarget,r=function(){};R.clickTrackHelper.openInNewWindow(n)||(r=R.clickTrackHelper.createFallbackFn(t.href,2));var o=n.target.id||"missing-header-logoutlink",s={linkType:"Header",href:n.target.href};e.sndPaywallSession.Auth.logout(function(){R.pulse.trackLink("Logout","Link",o,s,r),R.ga.trackLink(i.MENU,a.LOG_OUT,null,t.href,r)})},onMySiteClick:function(e){e.preventDefault(),R.ga.trackLink(i.MENU,a.MY_ACCOUNT,e.currentTarget.innerHTML,e.currentTarget.href)}}),menuIconUser:d({selectors:{ref:r.MENU_ICON_USER,parent:r.MENU_ICON,sibling:r.MENU_TRIGGER}}),perksCard:p({selectors:{ref:r.PERKS_CARD,parent:r.USER_MENU,sibling:r.PERKS_PRODUCTS,benefitsLink:r.BENEFITS_LINK},benefitsUrl:N.userMenu.benefits.url,cardUrl:N.userMenu.benefits.cardUrl,onBenefitsClick:function(e){e.preventDefault(),R.ga.trackLink(i.MENU,a.PERKS,e.currentTarget.innerHTML,e.currentTarget.href)}}),alerts:h({selectors:{ref:r.ALERTS_BELL,parent:r.WIDGETS,sibling:r.LOGIN,link:r.ALERTS_LINK,count:r.ALERTS_COUNT},onLinkClick:function(e){e.preventDefault(),R.ga.trackLink(i.MENU,a.NOTIFICATION,c.OPEN,e.currentTarget.href)},disable:"aftenposten"==N.publicationId}),bookmarks:f({selectors:{ref:r.BOOKMARKS,parent:r.WIDGETS,sibling:r.MENU_TRIGGER},enableBookmarks:"aftenposten"==N.publicationId,hasLocalStorageBookmarks:null!==O})},w={setStateClass:function(e){e?document.querySelector(r.CORE_HEADER).classList.add(o.LOGGED_IN):document.querySelector(r.CORE_HEADER).classList.remove(o.LOGGED_IN)}},U=document.getElementById("core-header-init-script");if(U){var P=U.attributes.getNamedItem("data-public-path"),A=U.attributes.getNamedItem("data-qs-path");n=P?P.value:"https://core-header.schibsted.tech/public",t=A?A.value:"https://core-header.schibsted.tech/public/quick-search.js"}e._coreHeader=m({sndPaywallSession:e.sndPaywallSession,components:C,listeners:w,clients:R,productCode:T,publicPath:n,qsPath:t,fetchSubBtnTxtFromCm:N.fetchSubBtnTxtFromCm}),e._coreHeader.setUpBehaviour(),e.updateBookmarks=function(){var e=document.querySelector("#ch-bookmarks"),n=document.querySelector(".ch-bookmarks-count"),t=document.querySelector(".ch-bookmarks-icon"),r=k("bookmarks"),o=r&&r.length>0?r.split(",").length:0;n.innerHTML=null!==r&&o>0?o:"",e.setAttribute("class",null!==r?"showing":"hidden"),o>0?t.classList.remove("empty"):t.classList.add("empty")},e.sndPaywallSession?e.sndPaywallSession.Event.subscribe("auth.sessionChange",function(){var n=e.sndPaywallSession.getSession();e._coreHeader.setSessionData({abTest:L,loggedIn:null!==n,givenName:n&&n.givenName,familyName:n&&n.familyName,userId:n&&n.userId,sig:n&&n.sig,loginURI:e.sndPaywallSession.getLoginURI(null,null,!0),logoutURI:e.sndPaywallSession.getLogoutURI(document.location.href,void 0,!0),bookmarks:O&&O.split(",").length})}):console.error("[CoreHeader] Failed to set up paywall behaviour. Paywall is not initialized!")}function M(e){if(window.Identity)return event.preventDefault(),event.stopImmediatePropagation(),sndPaywallSession.login(),!1;var n=function(){};R.clickTrackHelper.openInNewWindow(e)||(n=R.clickTrackHelper.createFallbackFn(e.target.href,2));var t=e.target.id||"missing-header-loginlink",r={linkType:"Header",href:e.target.href};R.pulse.trackLink("Login","Link",t,r,n),R.ga.trackLink(i.MENU,a.LOG_IN,null,e.target.href,n)}}(window)}catch(e){console.error("[CoreHeader] Error during init: "+e)}},function(e,n,t){var r=t(6),o=t(7),s=t(1).create,i=t(3);e.exports=function(e){return s({selectors:e.selectors,state:{},render:function(n,t){if(this.state=n,e.enableLoginButtonExperiment&&n.loginURI&&!n.loggedIn){if(loginNode=t(o,i({},n,{mySiteUrl:e.mySiteUrl})),loginBtn=loginNode.querySelector("a"),loginBtn){var s=this;loginBtn.addEventListener("click",function(n){s.state.loggedIn||e.onLoginClick(n)})}return loginNode}return t(r,i({},n,{mySiteUrl:e.mySiteUrl}))},update:function(n,t){var r=n.querySelector(e.selectors.userName),o=t.querySelector(e.selectors.userName);o.innerHTML=r.innerHTML,o.href=r.href,this.state.loggedIn&&(t.style.display="")}})}},function(e,n){e.exports='{{# givenName}}\n<div class="ch-login">\n  <a class="ch-user-name" href="{{{mySiteUrl}}}">{{givenName}}</a>\n</div>\n{{/givenName}}\n'},function(e,n){e.exports='<div class="ch-login ch-not-logged-in" style="display: block;">\n  <a class="ch-user-name" href="{{{loginURI}}}">Logg inn</a>\n</div>\n'},function(e,n,t){var r,o,s,i;
/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
i=function(e){var n=Object.prototype.toString,t=Array.isArray||function(e){return"[object Array]"===n.call(e)};function r(e){return"function"==typeof e}function o(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function s(e,n){return null!=e&&"object"==typeof e&&n in e}var i=RegExp.prototype.test,a=/\S/;function c(e){return!function(e,n){return i.call(e,n)}(a,e)}var l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},u=/\s*/,d=/\s+/,p=/\s*=/,h=/\s*\}/,f=/#|\^|\/|>|\{|&|=|!/;function m(e){this.string=e,this.tail=e,this.pos=0}function g(e,n){this.view=e,this.cache={".":this.view},this.parent=n}function E(){this.cache={}}m.prototype.eos=function(){return""===this.tail},m.prototype.scan=function(e){var n=this.tail.match(e);if(!n||0!==n.index)return"";var t=n[0];return this.tail=this.tail.substring(t.length),this.pos+=t.length,t},m.prototype.scanUntil=function(e){var n,t=this.tail.search(e);switch(t){case-1:n=this.tail,this.tail="";break;case 0:n="";break;default:n=this.tail.substring(0,t),this.tail=this.tail.substring(t)}return this.pos+=n.length,n},g.prototype.push=function(e){return new g(e,this)},g.prototype.lookup=function(e){var n,t,o,i=this.cache;if(i.hasOwnProperty(e))n=i[e];else{for(var a,c,l,u=this,d=!1;u;){if(e.indexOf(".")>0)for(a=u.view,c=e.split("."),l=0;null!=a&&l<c.length;)l===c.length-1&&(d=s(a,c[l])||(t=a,o=c[l],null!=t&&"object"!=typeof t&&t.hasOwnProperty&&t.hasOwnProperty(o))),a=a[c[l++]];else a=u.view[e],d=s(u.view,e);if(d){n=a;break}u=u.parent}i[e]=n}return r(n)&&(n=n.call(this.view)),n},E.prototype.clearCache=function(){this.cache={}},E.prototype.parse=function(n,r){var s=this.cache,i=n+":"+(r||e.tags).join(":"),a=s[i];return null==a&&(a=s[i]=function(n,r){if(!n)return[];var s,i,a,l=!1,g=[],E=[],k=[],S=!1,v=!1,y="",b=0;function I(){if(S&&!v)for(;k.length;)delete E[k.pop()];else k=[];S=!1,v=!1}function N(e){if("string"==typeof e&&(e=e.split(d,2)),!t(e)||2!==e.length)throw new Error("Invalid tags: "+e);s=new RegExp(o(e[0])+"\\s*"),i=new RegExp("\\s*"+o(e[1])),a=new RegExp("\\s*"+o("}"+e[1]))}N(r||e.tags);for(var _,T,L,O,R,C,w=new m(n);!w.eos();){if(_=w.pos,L=w.scanUntil(s))for(var U=0,P=L.length;U<P;++U)c(O=L.charAt(U))?(k.push(E.length),y+=O):(v=!0,l=!0,y+=" "),E.push(["text",O,_,_+1]),_+=1,"\n"===O&&(I(),y="",b=0,l=!1);if(!w.scan(s))break;if(S=!0,T=w.scan(f)||"name",w.scan(u),"="===T?(L=w.scanUntil(p),w.scan(p),w.scanUntil(i)):"{"===T?(L=w.scanUntil(a),w.scan(h),w.scanUntil(i),T="&"):L=w.scanUntil(i),!w.scan(i))throw new Error("Unclosed tag at "+w.pos);if(R=">"==T?[T,L,_,w.pos,y,b,l]:[T,L,_,w.pos],b++,E.push(R),"#"===T||"^"===T)g.push(R);else if("/"===T){if(!(C=g.pop()))throw new Error('Unopened section "'+L+'" at '+_);if(C[1]!==L)throw new Error('Unclosed section "'+C[1]+'" at '+_)}else"name"===T||"{"===T||"&"===T?v=!0:"="===T&&N(L)}if(I(),C=g.pop())throw new Error('Unclosed section "'+C[1]+'" at '+w.pos);return function(e){for(var n,t=[],r=t,o=[],s=0,i=e.length;s<i;++s)switch((n=e[s])[0]){case"#":case"^":r.push(n),o.push(n),r=n[4]=[];break;case"/":o.pop()[5]=n[2],r=o.length>0?o[o.length-1][4]:t;break;default:r.push(n)}return t}(function(e){for(var n,t,r=[],o=0,s=e.length;o<s;++o)(n=e[o])&&("text"===n[0]&&t&&"text"===t[0]?(t[1]+=n[1],t[3]=n[3]):(r.push(n),t=n));return r}(E))}(n,r)),a},E.prototype.render=function(e,n,t,r){var o=this.parse(e,r),s=n instanceof g?n:new g(n);return this.renderTokens(o,s,t,e,r)},E.prototype.renderTokens=function(e,n,t,r,o){for(var s,i,a,c="",l=0,u=e.length;l<u;++l)a=void 0,"#"===(i=(s=e[l])[0])?a=this.renderSection(s,n,t,r):"^"===i?a=this.renderInverted(s,n,t,r):">"===i?a=this.renderPartial(s,n,t,o):"&"===i?a=this.unescapedValue(s,n):"name"===i?a=this.escapedValue(s,n):"text"===i&&(a=this.rawValue(s)),void 0!==a&&(c+=a);return c},E.prototype.renderSection=function(e,n,o,s){var i=this,a="",c=n.lookup(e[1]);if(c){if(t(c))for(var l=0,u=c.length;l<u;++l)a+=this.renderTokens(e[4],n.push(c[l]),o,s);else if("object"==typeof c||"string"==typeof c||"number"==typeof c)a+=this.renderTokens(e[4],n.push(c),o,s);else if(r(c)){if("string"!=typeof s)throw new Error("Cannot use higher-order sections without the original template");null!=(c=c.call(n.view,s.slice(e[3],e[5]),function(e){return i.render(e,n,o)}))&&(a+=c)}else a+=this.renderTokens(e[4],n,o,s);return a}},E.prototype.renderInverted=function(e,n,r,o){var s=n.lookup(e[1]);if(!s||t(s)&&0===s.length)return this.renderTokens(e[4],n,r,o)},E.prototype.indentPartial=function(e,n,t){for(var r=n.replace(/[^ \t]/g,""),o=e.split("\n"),s=0;s<o.length;s++)o[s].length&&(s>0||!t)&&(o[s]=r+o[s]);return o.join("\n")},E.prototype.renderPartial=function(e,n,t,o){if(t){var s=r(t)?t(e[1]):t[e[1]];if(null!=s){var i=e[6],a=e[5],c=e[4],l=s;return 0==a&&c&&(l=this.indentPartial(s,c,i)),this.renderTokens(this.parse(l,o),n,t,l)}}},E.prototype.unescapedValue=function(e,n){var t=n.lookup(e[1]);if(null!=t)return t},E.prototype.escapedValue=function(n,t){var r=t.lookup(n[1]);if(null!=r)return e.escape(r)},E.prototype.rawValue=function(e){return e[1]},e.name="mustache.js",e.version="3.1.0",e.tags=["{{","}}"];var k=new E;return e.clearCache=function(){return k.clearCache()},e.parse=function(e,n){return k.parse(e,n)},e.render=function(e,n,r,o){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+(t(s=e)?"array":typeof s)+'" was given as the first argument for mustache#render(template, view, partials)');var s;return k.render(e,n,r,o)},e.to_html=function(n,t,o,s){var i=e.render(n,t,o);if(!r(s))return i;s(i)},e.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return l[e]})},e.Scanner=m,e.Context=g,e.Writer=E,e},n&&"string"!=typeof n.nodeName?i(n):(o=[n],void 0===(s="function"==typeof(r=i)?r.apply(n,o):r)||(e.exports=s))},function(e,n,t){var r=t(10),o=t(1).create,s=t(3);e.exports=function(e){return o({selectors:{ref:e.selectors.ref,parent:e.selectors.parent,sibling:e.selectors.sibling},render:function(n,t){var o=t(r,s({},n,e.links));if(n.loggedIn)o.querySelector(e.selectors.logoutBtn).addEventListener("click",e.onLogoutClick);else{o.querySelector(e.selectors.loginBtn).addEventListener("click",e.onLoginClick);var i=document.querySelector(".ch-list-item-special > a"),a=o.querySelector("a.ch-btn-abonnent");if(i&&a)if(0!=i.innerHTML.length)a.innerHTML=i.innerHTML,a.href=i.href;else new MutationObserver(function(e,n){e.forEach(function(e){"childList"===e.type&&(a.innerHTML=i.innerHTML,a.href=i.href,n.disconnect())})}).observe(i,{childList:!0})}return o.querySelector(e.selectors.mySiteLink).addEventListener("click",e.onMySiteClick),o}})}},function(e,n){e.exports='<ul class="ch-menu-area ch-menu-area-user" aria-label="user menu">\n    {{#loggedIn}}\n    <li class="ch-li-group">\n        <ul>\n            <li class="ch-user-details">\n                <i class="ch-icon ch-icon-user-hollow"></i>\n                <a class="ch-login-info" aria-label="Login information" href="{{{mySite.url}}}">{{givenName}} {{familyName}}</a>\n                <a class="ch-btn-logout" href="{{{logoutURI}}}">Logg ut</a>\n            </li>\n        </ul>\n    </li>\n    <li class="ch-li-group">\n        <ul>\n            <li class="ch-li-logged-in"><a class="ch-my-site-link ch-menu-section ch-btn-account" href="{{{mySite.url}}}">{{mySite.name}}</a></li>\n            <li class="ch-li-logged-in"><a class="ch-menu-section" href="{{{readings.url}}}">{{readings.name}}</a></li>\n            <li class="ch-li-logged-in"><a class="ch-benefits-link ch-menu-section" href="{{{benefits.url}}}">{{benefits.name}}</a></li>\n            {{#lastRead}}\n            <li class="ch-li-logged-in"><a class="ch-menu-section" href="{{{lastRead.url}}}">{{lastRead.name}}</a></li>\n            {{/lastRead}}\n        </ul>\n    </li>\n    {{/loggedIn}}\n    {{^loggedIn}}\n    <li class="ch-li-group">\n        <ul>\n            <li class="ch-li-login"><a class="ch-btn-login" href="{{{loginURI}}}">Logg inn</a></li>\n            <li class="ch-li-abonnent"><a class="ch-btn-abonnent"></a></li>\n        </ul>\n    </li>\n    <li class="ch-li-group">\n        <ul>\n            <li class="ch-li-logged-in"><a class="ch-my-site-link ch-menu-section ch-btn-account" href="{{{mySite.url}}}">{{mySite.name}}</a></li>\n            <li class="ch-li-logged-in"><a class="ch-benefits-link ch-menu-section" href="{{{benefits.url}}}">{{benefits.name}}</a></li>\n            {{#lastRead}}\n            <li class="ch-li-logged-in"><a class="ch-menu-section" href="{{{lastRead.url}}}">{{lastRead.name}}</a></li>\n            {{/lastRead}}\n        </ul>\n    </li>\n    {{/loggedIn}}\n</ul>\n'},function(e,n,t){var r=t(12),o=t(1).create;e.exports=function(e){return o({selectors:e.selectors,render:function(e,n){return n(r,e)},update:function(e,n){}})}},function(e,n){e.exports='{{# loggedIn}}\n<i class="ch-menu-icon-user">\n  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path\n      d="M12 13.3c2.7 0 8 1.5 8 4.5v2.3H4v-2.3C4 14.7 9.3 13.3 12 13.3L12 13.3zM12 12.8c-2.5 0-4.5-2-4.5-4.5 0-2.5 2-4.5 4.5-4.5 2.5 0 4.5 2.1 4.5 4.5C16.5 10.8 14.5 12.8 12 12.8z"/>\n  </svg>\n</i>\n{{/ loggedIn}}\n'},function(e,n,t){var r=t(14),o=t(1).create,s=t(3);e.exports=function(e){var n=e.benefitsUrl.replace(/http(s):\/\//,"");return o({selectors:{ref:e.selectors.ref,parent:e.selectors.parent,sibling:e.selectors.sibling},render:function(t,o){var i=o(r,s({},t,{benefits:{url:e.benefitsUrl,cardUrl:e.cardUrl,displayUrl:n}}));return t.subscribed&&i.querySelector(e.selectors.benefitsLink).addEventListener("click",e.onBenefitsClick),i}})}},function(e,n){e.exports='{{#subscribed}}\n<li class="ch-perks-card">\n  <div class="ch-perks-card-container">\n    <div class="ch-perks-header">\n      <span class="ch-perks-link">\n        <a class="ch-benefits-link" href="{{benefits.cardUrl}}">\n          <span class="ch-perks-message"></span>\n        </a>\n      </span>\n      <span class="ch-perks-year"></span>\n    </div>\n    <span class="ch-perks-pub-logo"><i class="ch-icon ch-icon-logo-short"></i></span>\n    <span class="ch-perks-title"></span>\n    <div class="ch-perks-customer-info">\n      <strong>Navn: </strong>\n      <span class="ch-perks-given-name">{{givenName}}</span>\n      <span class="ch-perks-family-name">{{familyName}}</span>\n    </div>\n    <div class="ch-perks-customer-info">\n      <strong>Kundenummer: </strong>\n      <span class="ch-perks-customer-id">{{customerId}}</span>\n    </div>\n  </div>\n</li>\n{{/subscribed}}\n'},function(e,n,t){var r=t(16),o=t(1).create;e.exports=function(e){return o({selectors:e.selectors,render:function(n,t){if(!e.disable){var o=t(r,n);return n.hasProduct&&o.querySelector(e.selectors.link).addEventListener("click",e.onLinkClick),o}},update:function(n,t){t.className=n.className,t.querySelector(e.selectors.count).innerHTML=n.querySelector(e.selectors.count).innerHTML}})}},function(e,n){e.exports='{{# hasProduct}}\n<div class="ch-alerts {{#count}}ch-alerts-on{{/count}}{{^count}}ch-alerts-off{{/count}}">\n  <a href="/mine-varsler" class="ch-alerts-link">\n    <i class="ch-alerts-icon ch-icon ch-icon-bell"></i>\n    <div class="ch-alerts-count">{{count}}</div>\n  </a>\n</div>\n{{/hasProduct}}\n'},function(e,n,t){var r=t(18),o=t(1).create,s=t(3);e.exports=function(e){return o({selectors:e.selectors,render:function(n,t){if(e.enableBookmarks)var o=t(r,s({},n,{hasLocalStorageBookmarks:e.hasLocalStorageBookmarks}));return o}})}},function(e,n){e.exports='<div class="{{^hasLocalStorageBookmarks}}hidden{{/hasLocalStorageBookmarks}}" id="ch-bookmarks">\n  <a href="/mitt-innhold" class="ch-bookmarks-link" aria-label="Leseliste">\n    <i class="ch-icon ch-bookmarks-icon {{^bookmarks}}empty{{/bookmarks}}"></i>\n    <div class="ch-bookmarks-count">{{bookmarks}}</div>\n  </a>\n</div>\n'},function(e,n,t){var r=t(0).selectors,o=t(0).classes,s=t(0).categories,i=t(0).actions,a=t(0).productCodes,c=t(2),l=t(20);e.exports=function(e){var n,t,u=this;function d(r,o){e.clients.matrix.getUnseenAlertsCount(r,o,function(r,o){r&&(console.error("[CoreHeader] Errored while fetching matrix alerts","Code:",r.code+".","Message:",r.message+"."),0==--t&&(clearInterval(n),console.error("[CoreHeader] Too many failed matrix retries, stopping."))),e.components.alerts.setState({count:o,hasProduct:!0})})}return u.hasProduct=void 0,u.sessionData=void 0,u.menuExecQueue=[],{setUpBehaviour:function(n){var t,a,d,p;t=document.querySelectorAll(r.SUBHEADER_NAV_TRIGGER),a=document.querySelector(r.SUBHEADER_DROPDOWN),(t||a)&&Array.prototype.forEach.call(t,function(n){n.addEventListener("click",function(){var t,r=s.MENU;a.classList.contains(o.IS_OPEN)?(a.classList.remove(o.IS_OPEN),n.classList.remove(o.IS_OPEN),t=i.CLOSE_DROPDOWN):(a.classList.add(o.IS_OPEN),n.classList.add(o.IS_OPEN),t=i.EXPAND_DROPDOWN),e.clients.ga.sendEvent(r,t)})}),d=document.querySelector(r.SUBSCRIBE_BTN_CONTAINER),p=document.querySelectorAll(".ch-list-item-special > a"),e.fetchSubBtnTxtFromCm&&e.fetchSubBtnTxtFromCm.enabled&&c.fetch({uri:e.fetchSubBtnTxtFromCm.url.replace(e.fetchSubBtnTxtFromCm.publicationParamPattern,window.__CORE_HEADER_CONFIG__.publicationId)},function(e,n){if(e)d&&(d.style.display="none");else{d&&d.classList.remove("hidden");for(var t=0;t<p.length;t++)p[t].parentElement.classList.remove("hidden"),p[t].innerHTML=n.data.coreHeader.text,p[t].href=n.data.coreHeader.url}}),function(e){var n=document.querySelector(r.MENU_STATE);if(n){var t=!1;n.addEventListener("change",function(){n.checked&&!t&&c.fetch({uri:__CORE_HEADER_CONFIG__.partialPathTemplate.replace("{partial}","menu"),responseType:"text"},function(n,o){if(n)console.error("[CoreHeader]: Failed to fetch menu partial!",n);else if(o){t=!0;var s=document.createElement("div");s.innerHTML=o;var i=document.querySelector(r.CORE_HEADER);i&&(Array.prototype.forEach.call(s.childNodes,function(e){i.appendChild(e)}),l(u.menuExecQueue,e))}})})}}({quickSearch:n}),function(){var n=document.querySelector(".ch-search input");if(n){var t=!1;n.addEventListener("focus",function(){t||c.loadScript(e.qsPath,function(e){e?console.error("Failed to load QuickSearch:",e):(console.debug("QuickSearch loaded!"),t=!0)})})}}(),function(){if(void 0!==window.pulse){var e=function(e,n,t){"string"!=typeof t&&(t=""),Array.prototype.slice.call(document.querySelectorAll(".ch-core-header "+e)).forEach(function(e){e.addEventListener("click",function(r){n.object.id=function(e,n){return n.length>0&&(e=n+"-"+e),e.toLowerCase().replace(" ","-")}(e.innerText,t),n.object.name=e.innerText,n.target&&(n.target.id=e.pathname,n.target.url=e.href),window.pulse("track","engagementEvent",n)})})};e(".ch-header-main .ch-main-links a",{action:"Click",object:{type:"UIElement"},target:{type:"Listing"}},"quicknav"),e(".ch-header-main .ch-menu-state-label",{action:"Click",object:{type:"UIElement"}},"menutoggle"),e(".ch-list-item-special a",{action:"Click",object:{type:"UIElement"},target:{type:"Page"}}),u.menuExecQueue.push([e,this,["#ch-menu .ch-menu-group > .ch-menu-area.ch-menu-area-nav a",{action:"Click",object:{type:"UIElement"},target:{type:"Listing"}},"subnav"]]),u.menuExecQueue.push([e,this,["#ch-menu a.ch-btn-login",{action:"Click",object:{type:"UIElement"},target:{type:"Form"}}]]),u.menuExecQueue.push([e,this,["a.ch-my-site-link.ch-menu-section.ch-btn-account, a.ch-benefits-link.ch-menu-section, .ch-li-abonnent a",{action:"Click",object:{type:"UIElement"},target:{type:"Page"}}]]),u.menuExecQueue.push([e,this,["#ch-menu .ch-menu-area-pub a",{action:"Click",object:{type:"UIElement"},target:{type:"Content"}}]])}}()},setSessionData:function(o){u.sessionData=o,e.listeners.setStateClass(o.loggedIn),function(n){e.components.login.setState(n),e.components.menuIconUser.setState(n),e.components.bookmarks&&e.components.bookmarks.setState(n),u.menuExecQueue.push([e.components.userMenu.setState,e.components.userMenu,[n]]),e.components.userCard&&e.components.userCard.setState(n)}(o),function(o){e.sndPaywallSession.hasProduct(e.productCode,function(s){var i=s.productId===a.notRequiringSubscription?o.loggedIn:s.result;u.hasProduct=i,s.code&&s.message&&console.error("[CoreHeader] Errored while checking product.","Code:",s.code+".","Message:",s.message+".");for(var c=document.querySelectorAll(r.SUBSCRIBE_BTN_CONTAINER+","+r.SUBSCRIBE_BTN),l=0;l<c.length;l++)c[l].style.display=i?"none":"";e.clients.matrix&&function(r,o){t=3,clearInterval(n),o?(d(r.userId,r.sig),n=setInterval(function(){d(r.userId,r.sig)},e.matrixInterval||6e4)):(r.userId&&r.sig&&e.clients.matrix.getUnseenAlertsCount(r.userId,r.sig,function(){}),e.components.alerts.setState({hasProduct:!1}))}(o,i)})}(o),e.clients.perks&&function(n){e.clients.perks.getData(n.userId,n.sig,function(t,r){if(t)return console.error("[CoreHeader] Errored while fetching perks data.Code:",t.status+".",t.message?"Message: "+t.message+".":""),void u.menuExecQueue.push([e.components.perksCard.setState,e.components.perksCard,[{subscribed:!1}]]);e.components.perksProducts&&u.menuExecQueue.push([e.components.perksProducts.setState,e.components.perksProducts,[{products:r.products}]]),u.menuExecQueue.push([e.components.perksCard.setState,e.components.perksCard,[{givenName:n.givenName,familyName:n.familyName,customerId:r.user.customerId,subscribed:!!r.user.subscription}]])})}(o)},menuExecQueue:u.menuExecQueue}}},function(e,n,t){var r=t(0).selectors,o=t(0).classes;e.exports=function(e,n){var t,s,i,a,c,l,u,d,p,h,f,m;void 0===n&&(n={}),e.forEach(function(e){e[0].apply(e[1],e[2])}),t="ontouchstart"in document.documentElement?"touchstart":"click",s=document.querySelector(r.CORE_HEADER),i=document.querySelector(r.MENU_TRIGGER),a=document.querySelector(r.MENU_STATE),c=n.quickSearch||window.quickSearch,i.addEventListener(t,function(e){a.checked&&c&&c.clean()}),document.body.addEventListener(t,function(e){e.target===s||s.contains(e.target)?e.stopPropagation():(c&&c.clean(),a.checked=!1)}),l=document.querySelectorAll(r.SECTION_NAV_TRIGGER),u=null,Array.prototype.forEach.call(l,function(e){e.addEventListener("click",function(e){var n=e.currentTarget.parentNode.parentNode;if(u===n)return n.classList.remove(o.IS_OPEN),void(u=null);n.classList.add(o.IS_OPEN),u&&u.classList.remove(o.IS_OPEN),u=n})}),d=document.querySelector(r.SITEMAP_OPEN_TRIGGER),p=document.querySelector(r.SITEMAP_CLOSE_TRIGGER),h=document.querySelector(r.SECTIONS_MENU),f=document.querySelector(r.SITEMAP),m=document.querySelector(r.INFO_MENU),d.addEventListener("click",function(){m.classList.add(o.SHOW_SITEMAP),h.classList.add(o.SHOW_SITEMAP),f.classList.add(o.SHOW_SITEMAP)}),p.addEventListener("click",function(){m.classList.remove(o.SHOW_SITEMAP),h.classList.remove(o.SHOW_SITEMAP),f.classList.remove(o.SHOW_SITEMAP)})}},function(e,n){e.exports=function(e){return{getData:function(n,t,r){var o="//{host}/perks/widgets/v2/publications/{publication}/card".replace("{host}",e.host).replace("{publication}",e.publication),s={"x-spid-sig":t},i={userId:n||"notLoggedIn"};e.fetch({uri:o,headers:s,params:i},r)}}}},function(e,n){e.exports=function(e){return{getUnseenAlertsCount:function(n,t,r){var o="//{host}/matrix/api/v2/user/{userId}/notifications/{publication}/new".replace("{host}",e.host).replace("{publication}",e.publication).replace("{userId}",n),s={sig:t};e.fetch({uri:o,params:s},function(e,n){r(e||n.code&&n.message&&n,n&&n.unseen)})}}}},function(e,n){function t(e,n){var t;function r(){clearTimeout(t),e()}return t=setTimeout(r,n),r}e.exports=function(){return{sendEvent:function(e,n,t){"undefined"!=typeof ga&&ga("send","event",e,n,t)},trackLink:function(e,n,r,o,s){n=n||"click",o=o||"#",s=s||t(function(){window.location.href=o},300),"undefined"!=typeof ga&&ga("send","event",e,n,r,{hitCallback:s})},trackForm:function(e,n,r,o){n=n||"click","undefined"!=typeof ga?ga("send","event",e,n,r,{hitCallback:t(function(){o.submit()},300)}):o.submit()}}}},function(e,n){e.exports=function(){return{createFallbackFn:function(e,n,t){t=t||300,n=n||1;var r=0;t=setTimeout(function(){document.location.href=e},t);return function(){++r==n&&(clearTimeout(t),document.location.href=e)}},openInNewWindow:function(e){return!!(e.metaKey||e.ctrlKey||e.shiftKey)}}}},function(e,n){e.exports=function(){var e={};return window.pulse2plugins=window.pulse2plugins||{},window.pulse2plugins.onReadyHooks=window.pulse2plugins.onReadyHooks||[],window.pulse2plugins.onReadyHooks.push(function(n){e=n}),{trackLink:function(n,t,r,o,s){var i=e!={}?e:window.AutoTrack?window.AutoTrack:window.engage&&window.engage.pulse?window.engage.pulse:{};i!=={}?i.events.trackEngagement(e.utils.getViewDuration(),e.utils.getScrollPosition(),"Click",t,r,n,o).send(s):console.error("Pulse tracking could not start, no AutoTracker.")}}}}]);